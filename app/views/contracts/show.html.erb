<% content_for :title, "Contract ##{@contract.id}" %>

<div class="contract-show-container">
  <div class="contract-header">
    <h1 class="text-3xl font-bold mb-4">Contract #<%= @contract.id %></h1>
    
    <%= render_filtered_breadcrumb(@filtered_breadcrumb) if @filtered_breadcrumb %>
  </div>

  <div class="contract-details grid grid-cols-1 md:grid-cols-2 gap-6">
    <div class="contract-basic-info">
      <h2 class="text-xl font-semibold mb-3">Contract Information</h2>
      
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Player:</span>
          <span class="value">
            <%= link_to @contract.player.name, player_path(@contract.player), 
                class: "text-blue-600 hover:text-blue-800" %>
          </span>
        </div>
        
        <div class="info-item">
          <span class="label">Team:</span>
          <span class="value">
            <%= link_to @contract.team.name, team_path(@contract.team), 
                class: "text-blue-600 hover:text-blue-800" %>
          </span>
        </div>
        
        <div class="info-item">
          <span class="label">Start Date:</span>
          <span class="value"><%= @contract.start_date&.strftime("%B %d, %Y") || "Not specified" %></span>
        </div>
        
        <div class="info-item">
          <span class="label">End Date:</span>
          <span class="value"><%= @contract.end_date&.strftime("%B %d, %Y") || "Not specified" %></span>
        </div>
        
        <div class="info-item">
          <span class="label">Total Value:</span>
          <span class="value">
            <% if @contract.total_dollar_value %>
              $<%= number_with_delimiter(@contract.total_dollar_value.to_i) %>
            <% else %>
              Not specified
            <% end %>
          </span>
        </div>
      </div>
    </div>

    <div class="contract-activations">
      <h2 class="text-xl font-semibold mb-3">Activations</h2>
      
      <% if @contract.activations.any? %>
        <div class="activations-list">
          <% @contract.activations.includes(:campaign).each do |activation| %>
            <div class="activation-item border-b pb-2 mb-2">
              <%= link_to activation_path(activation), class: "text-blue-600 hover:text-blue-800" do %>
                Campaign: <%= activation.campaign.team.name %> - <%= activation.campaign.season.year %>
              <% end %>
              <% if activation.start_date || activation.end_date %>
                <div class="text-sm text-gray-600">
                  <%= activation.start_date&.strftime("%m/%d/%Y") || "?" %> - 
                  <%= activation.end_date&.strftime("%m/%d/%Y") || "?" %>
                </div>
              <% end %>
            </div>
          <% end %>
        </div>
      <% else %>
        <p class="text-gray-600">No activations for this contract.</p>
      <% end %>
    </div>
  </div>

  <% if @contract.details.present? %>
    <div class="contract-details-section mt-6">
      <h2 class="text-xl font-semibold mb-3">Additional Details</h2>
      <div class="details-content bg-gray-50 p-4 rounded">
        <pre class="whitespace-pre-wrap"><%= JSON.pretty_generate(@contract.details) %></pre>
      </div>
    </div>
  <% end %>

  <div class="contract-actions mt-6">
    <%= link_to "Edit Contract", edit_contract_path(@contract), 
        class: "btn btn-primary" %>
    <%= link_to "Back to Contracts", contracts_path, 
        class: "btn btn-secondary" %>
  </div>
</div>